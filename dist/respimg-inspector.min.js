/*
 *	respimg-inspector - v0.2.0
 *	A javascript plugin to check responsive images in the browser.
 *	
 *
 *	Made by Florent Bourgeois
 *	Under MIT License
 */
!function(a,b,c){"use strict";var d,e={},f=!!b.querySelector&&!!a.addEventListener&&!!a.MutationObserver,g=[],h=[],i=[],j={selectors:null,classNamespace:"respimg-inspector-"},k=["span","em","strong","i","b","big","small","tt","abbr","script","br","hr","sub","sup","button","input","label","select","textarea","samp","var"],l=b.body,m=b.documentElement,n=function(a,b,c){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&b.call(c,a[d],d,a);else for(var e=0,f=a.length;f>e;e++)b.call(c,a[e],e,a)},o=function(a,b){var c,d={};for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c]);return d},p=function(b,c,d){var e=d||a,f=!1,g=function(){f||(f=!0,r.disconnect(),requestAnimationFrame(function(){e.dispatchEvent(new CustomEvent(c)),f=!1}))};e.addEventListener(b,g)},q=function(b,c){return a.getComputedStyle(b,null).getPropertyValue(c)},r=new MutationObserver(function(a){a.forEach(function(){s()})}),s=function(){A();var c=t(),d=b.querySelectorAll(c);n(d,function(a){var b=w(a),c={el:a,img:b};("IMG"===c.el.nodeName||"cover"===q(c.el,"background-size"))&&(g.push(c),h.push(b))}),a.imagesLoaded(h,function(){n(g,function(a){var b=o(u(a.el),v(a.img));i.push(y(b)),r.observe(a.el,{attributes:!0})}),z(),r.observe(l,{childList:!0})})},t=function(){if(d.selectors)return d.selectors;var a=k.map(function(a){return"*:not("+a+")"});return a.join()},u=function(b){var c=b.getBoundingClientRect(),d=a.pageYOffset||m.scrollTop||l.scrollTop,e=a.pageXOffset||m.scrollLeft||l.scrollLeft,f=m.clientTop||l.clientTop||0,g=m.clientLeft||l.clientLeft||0;return{elTag:b.nodeName.toLowerCase(),elWidth:c.width,elHeight:c.height,elTop:Math.round(c.top+d-f),elBottom:Math.round(c.bottom+d-f),elLeft:Math.round(c.left+e-g),elRight:Math.round(c.right+e-g)}},v=function(a){return{imgWidth:a.width,imgHeight:a.height,imgNaturalWidth:a.naturalWidth,imgNaturalHeight:a.naturalHeight,imgSizes:a.sizes}},w=function(a){var b;if("IMG"===a.nodeName)b=a;else if("none"!==q(a,"background-image")){var c=/^url\((['"]?)(.*)\1\)$/.exec(q(a,"background-image"));c&&(b=new Image,b.src=c[2])}return b},x=function(b){var c,e=a.devicePixelRatio;return c=b.elWidth*e<b.imgNaturalWidth||b.elHeight*e<b.imgNaturalHeight?"warning":b.elWidth*e>b.imgNaturalWidth||b.elHeight*e>b.imgNaturalHeight?"bad":"good",d.classNamespace+c},y=function(a){var c=b.createElement("div");return c.classList.add(d.classNamespace+"overlay"),c.style.position="absolute",c.style.width=a.elWidth+"px",c.style.height=a.elHeight+"px",c.style.top=a.elTop+"px",c.style.left=a.elLeft+"px",c.style.zIndex=2147483647,c.classList.add(x(a)),n(a,function(a,b){c.dataset[b]=a}),c},z=function(){n(i,function(a){l.appendChild(a)})},A=function(){r.disconnect(),i.length&&n(i,function(a){a.remove()}),g=[],h=[],i=[]};e.init=function(b){f&&(d=o(j,b||{}),p("resize","optimizedResize"),a.addEventListener("optimizedResize",s),s())},e.destroy=function(){d&&(A(),a.removeEventListener("optimizedResize",s))},"function"==typeof define&&define.amd?define([],function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:a.respImgInspector=e}(window,document);