/*
 *	respimg-inspector - v0.1.1
 *	A javascript plugin to check responsive images in the browser.
 *	
 *
 *	Made by Florent Bourgeois
 *	Under MIT License
 */
!function(a,b,c){"use strict";var d,e={},f=!!b.querySelector&&!!a.addEventListener&&!!a.MutationObserver,g=[],h=[],i=[],j={selectors:null,classNamespace:"respimg-inspector-"},k=["span","em","strong","i","b","big","small","tt","abbr","script","br","hr","sub","sup","button","input","label","select","textarea","samp","var"],l=b.body,m=function(a,b,c){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&b.call(c,a[d],d,a);else for(var e=0,f=a.length;f>e;e++)b.call(c,a[e],e,a)},n=function(a,b){var c,d={};for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c]);return d},o=function(b,c,d){var e=d||a,f=!1,g=function(){f||(f=!0,q.disconnect(),requestAnimationFrame(function(){e.dispatchEvent(new CustomEvent(c)),f=!1}))};e.addEventListener(b,g)},p=function(b,c){return a.getComputedStyle(b,null).getPropertyValue(c)},q=new MutationObserver(function(a){a.forEach(function(){r()})}),r=function(){z();var c=s(),d=b.querySelectorAll(c);m(d,function(a){var b=v(a),c={el:a,img:b};("IMG"===c.el.nodeName||"cover"===p(c.el,"background-size"))&&(g.push(c),h.push(b))}),a.imagesLoaded(h,function(){m(g,function(a){var b=n(t(a.el),u(a.img));i.push(x(b)),q.observe(a.el,{attributes:!0})}),y(),q.observe(l,{childList:!0})})},s=function(){if(d.selectors)return d.selectors;var a=k.map(function(a){return"*:not("+a+")"});return a.join()},t=function(a){var b=a.getBoundingClientRect();return{elTag:a.nodeName.toLowerCase(),elWidth:b.width,elHeight:b.height,elTop:b.top,elBottom:b.bottom,elLeft:b.left,elRight:b.right}},u=function(a){return{imgWidth:a.width,imgHeight:a.height,imgNaturalWidth:a.naturalWidth,imgNaturalHeight:a.naturalHeight,imgSizes:a.sizes}},v=function(a){var b;if("IMG"===a.nodeName)b=a;else if("none"!==p(a,"background-image")){var c=/^url\((['"]?)(.*)\1\)$/.exec(p(a,"background-image"));b=new Image,b.src=c[2]}return b},w=function(b){var c,e=a.devicePixelRatio;return c=b.elWidth*e<b.imgNaturalWidth||b.elHeight*e<b.imgNaturalHeight?"warning":b.elWidth*e>b.imgNaturalWidth||b.elHeight*e>b.imgNaturalHeight?"bad":"good",d.classNamespace+c},x=function(a){var c=p(l,"margin-top"),e=p(l,"margin-left"),f=l.getBoundingClientRect(),g=a.elTop-f.top,h=a.elLeft-f.left,i=b.createElement("div");return i.classList.add(d.classNamespace+"overlay"),i.style.position="absolute",i.style.width=a.elWidth+"px",i.style.height=a.elHeight+"px",i.style.top="calc("+g+"px + "+c+")",i.style.left="calc("+h+"px + "+e+")",i.classList.add(w(a)),m(a,function(a,b){i.dataset[b]=a}),i},y=function(){m(i,function(a){l.appendChild(a)})},z=function(){q.disconnect(),i.length&&m(i,function(a){a.remove()}),g=[],h=[],i=[]};e.init=function(b){f&&(d=n(j,b||{}),o("resize","optimizedResize"),a.addEventListener("optimizedResize",r),r())},e.destroy=function(){d&&(z(),a.removeEventListener("optimizedResize",r))},"function"==typeof define&&define.amd?define([],function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:a.respImgInspector=e}(window,document);